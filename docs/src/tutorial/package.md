---
title: åŒ…ç®¡ç†å™¨
description: YaoXiang å®˜æ–¹åŒ…ç®¡ç†å™¨ä½¿ç”¨æ•™ç¨‹
---

# åŒ…ç®¡ç†å™¨

YaoXiang å†…ç½®çš„åŒ…ç®¡ç†å™¨ï¼Œæä¾›å®Œæ•´çš„ä¾èµ–ç®¡ç†åŠŸèƒ½ã€‚

## æ¦‚è¿°

YaoXiang Package Manager (YPM) é‡‡ç”¨å£°æ˜å¼ä¾èµ–ç®¡ç†ï¼š

- åœ¨ `yaoxiang.toml` ä¸­å£°æ˜é¡¹ç›®ä¾èµ–
- `yaoxiang.lock` é”å®šç²¾ç¡®ç‰ˆæœ¬ï¼Œç¡®ä¿æ„å»ºå¯é‡ç°
- ä¾èµ–ä¸‹è½½åˆ° `vendor` ç›®å½•

## å¿«é€Ÿå¼€å§‹

```bash
# åˆ›å»ºæ–°é¡¹ç›®
yaoxiang init my-project
cd my-project

# æ·»åŠ ä¾èµ–
yaoxiang add http
yaoxiang add json

# å®‰è£…ä¾èµ–
yaoxiang install

# è¿è¡Œé¡¹ç›®
yaoxiang run src/main.yx
```

## é¡¹ç›®ç»“æ„

```
my-project/
â”œâ”€â”€ yaoxiang.toml      # é¡¹ç›®æ¸…å•
â”œâ”€â”€ yaoxiang.lock      # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ vendor/            # ä¾èµ–å­˜å‚¨
â””â”€â”€ src/
    â””â”€â”€ main.yx
```

---

## init

åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®ã€‚

### ç”¨æ³•

```bash
yaoxiang init <name>
```

### å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `name` | string | é¡¹ç›®åç§° |

### æè¿°

åœ¨å½“å‰ç›®å½•æˆ–æŒ‡å®šè·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ YaoXiang é¡¹ç›®ã€‚

### åˆ›å»ºçš„æ–‡ä»¶

- `yaoxiang.toml` - é¡¹ç›®æ¸…å•
- `yaoxiang.lock` - ä¾èµ–é”å®šæ–‡ä»¶
- `src/main.yx` - å…¥å£æ–‡ä»¶
- `.gitignore` - Git å¿½ç•¥é…ç½®

### ç¤ºä¾‹

```bash
# åœ¨å½“å‰ç›®å½•åˆ›å»ºé¡¹ç›®
yaoxiang init my-project

# è¾“å‡º
# âœ¨ é¡¹ç›®å·²åˆ›å»ºï¼šmy-project
#   my-project/yaoxiang.toml
#   my-project/yaoxiang.lock
#   my-project/src/main.yx
#   my-project/.gitignore
```

---

## add

æ·»åŠ ä¾èµ–åˆ°é¡¹ç›®ã€‚

### ç”¨æ³•

```bash
yaoxiang add <name> [version]
yaoxiang add <name> --dev
```

### å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `name` | string | åŒ…åç§° |
| `version` | string | ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼Œé»˜è®¤ `*`ï¼‰ |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--dev`, `-D` | æ·»åŠ ä¸ºå¼€å‘ä¾èµ– |

### æè¿°

å°†ä¾èµ–æ·»åŠ åˆ°é¡¹ç›®çš„ `yaoxiang.toml` æ–‡ä»¶ï¼Œå¹¶æ›´æ–° `yaoxiang.lock`ã€‚

### ç‰ˆæœ¬è§„èŒƒ

| è§„èŒƒ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `*` | ä»»æ„ç‰ˆæœ¬ | `http = "*"` |
| `1.0.0` | ç²¾ç¡®ç‰ˆæœ¬ | `http = "1.0.0"` |
| `>=1.0.0` | æœ€ä½ç‰ˆæœ¬ | `http = ">1.0.0"` |
| `~1.0.0` | å…¼å®¹ç‰ˆæœ¬ | `http = "~1.0.0"` |
| `^1.0.0` | caret ç‰ˆæœ¬ | `http = "^1.0.0"` |

### ä¾èµ–æ¥æº

#### Registryï¼ˆé»˜è®¤ï¼‰

```bash
yaoxiang add http
yaoxiang add http 1.0.0
```

#### Git ä»“åº“

```bash
# ä¼šåœ¨ manifest ä¸­ç”Ÿæˆå¦‚ä¸‹é…ç½®
# http = { version = "1.0.0", git = "https://github.com/example/http" }
```

#### æœ¬åœ°è·¯å¾„

```bash
# ä¼šåœ¨ manifest ä¸­ç”Ÿæˆå¦‚ä¸‹é…ç½®
# mylib = { version = "0.1.0", path = "./mylib" }
```

### ç¤ºä¾‹

```bash
# æ·»åŠ æœ€æ–°ç‰ˆæœ¬
yaoxiang add http

# æ·»åŠ æŒ‡å®šç‰ˆæœ¬
yaoxiang add http 1.0.0

# æ·»åŠ ç‰ˆæœ¬èŒƒå›´
yaoxiang add json ">=2.0.0"

# æ·»åŠ å¼€å‘ä¾èµ–
yaoxiang add test-utils --dev
yaoxiang add benchmark -D
```

---

## rm

ä»é¡¹ç›®ä¸­ç§»é™¤ä¾èµ–ã€‚

### ç”¨æ³•

```bash
yaoxiang rm <name>
yaoxiang rm <name> --dev
```

### å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `name` | string | åŒ…åç§° |

### é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--dev`, `-D` | ç§»é™¤å¼€å‘ä¾èµ– |

### æè¿°

ä»é¡¹ç›®çš„ `yaoxiang.toml` ç§»é™¤æŒ‡å®šçš„ä¾èµ–ï¼Œå¹¶æ›´æ–° `yaoxiang.lock`ã€‚

### ç¤ºä¾‹

```bash
# ç§»é™¤è¿è¡Œæ—¶ä¾èµ–
yaoxiang rm http

# ç§»é™¤å¼€å‘ä¾èµ–
yaoxiang rm test-utils --dev
```

---

## install

å®‰è£…é¡¹ç›®ä¾èµ–ã€‚

### ç”¨æ³•

```bash
yaoxiang install
```

### æè¿°

è¯»å– `yaoxiang.toml` ä¸­çš„ä¾èµ–å£°æ˜ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. è§£æä¾èµ–ç‰ˆæœ¬
2. æ£€æµ‹ç‰ˆæœ¬å†²çª
3. ä¸‹è½½ä¾èµ–åˆ° `vendor` ç›®å½•
4. ç”Ÿæˆ/æ›´æ–° `yaoxiang.lock`

### è¡Œä¸º

- å¦‚æœæ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯å¹¶é€€å‡º
- å¦‚æœ `vendor` ç›®å½•å·²å­˜åœ¨ï¼Œä¼šæ£€æŸ¥å¹¶å¤ç”¨ç¼“å­˜
- å¦‚æœæ£€æµ‹åˆ°ç‰ˆæœ¬å†²çªï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡º

### ç¤ºä¾‹

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
yaoxiang install

# è¾“å‡º
# ğŸ“¦ æ­£åœ¨è§£æä¾èµ–...
#   http (1.0.0) [å·²å®‰è£…]
#   json (2.0.0) [å·²ç¼“å­˜]
# âœ… ä¾èµ–å·²å®‰è£…ï¼Œé”æ–‡ä»¶å·²æ›´æ–°
```

### é”æ–‡ä»¶æ›´æ–°

`install` å‘½ä»¤ä¼šæ›´æ–° `yaoxiang.lock`ï¼š

```toml
# yaoxiang.lock
[package]
version = 1

[package.http]
version = "1.0.0"
source = "registry"

[package.json]
version = "2.0.0"
source = "registry"
```

---

## update

æ›´æ–°é¡¹ç›®ä¾èµ–ã€‚

### ç”¨æ³•

```bash
yaoxiang update
yaoxiang update <name>
```

### å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `name` | string | åŒ…åç§°ï¼ˆå¯é€‰ï¼‰ |

### æè¿°

### å…¨é‡æ›´æ–°

ä¸å¸¦å‚æ•°æ—¶ï¼Œæ›´æ–°æ‰€æœ‰ä¾èµ–ï¼š

1. æ¸…ç©ºå½“å‰é”å®šçš„ç‰ˆæœ¬
2. æ¸…ç† `vendor` ç›®å½•ä¸­çš„æ—§ç‰ˆæœ¬
3. é‡æ–°ä¸‹è½½æ‰€æœ‰ä¾èµ–
4. æ›´æ–° `yaoxiang.lock`

### å•ä¸€æ›´æ–°

å¸¦å‚æ•°æ—¶ï¼Œä»…æ›´æ–°æŒ‡å®šä¾èµ–ï¼š

1. ä» `vendor` ä¸­åˆ é™¤æ—§ç‰ˆæœ¬
2. é‡æ–°ä¸‹è½½æ–°ç‰ˆæœ¬
3. æ›´æ–° `yaoxiang.lock` ä¸­å¯¹åº”æ¡ç›®
4. å…¶ä»–ä¾èµ–ä¸å—å½±å“

### ç¤ºä¾‹

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–
yaoxiang update

# è¾“å‡º
# ğŸ“¦ æ­£åœ¨æ›´æ–°ä¾èµ–...
#   http (1.0.0 â†’ 1.1.0)
#   json (2.0.0 â†’ 2.1.0)
# âœ… å·²æ›´æ–° 2 ä¸ªä¾èµ–ï¼Œé”æ–‡ä»¶å·²æ›´æ–°

# æ›´æ–°å•ä¸ªä¾èµ–
yaoxiang update http

# è¾“å‡º
# âœ… å·²æ›´æ–° http (1.0.0 â†’ 1.1.0)
```

---

## list

åˆ—å‡ºé¡¹ç›®ä¾èµ–ã€‚

### ç”¨æ³•

```bash
yaoxiang list
```

### æè¿°

æ˜¾ç¤ºé¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬ï¼š

- è¿è¡Œæ—¶ä¾èµ–ï¼ˆæ¥è‡ª `[dependencies]`ï¼‰
- å¼€å‘ä¾èµ–ï¼ˆæ¥è‡ª `[dev-dependencies]`ï¼‰
- æ¯ä¸ªä¾èµ–çš„ç‰ˆæœ¬å’Œæ¥æº

### ç¤ºä¾‹

```bash
yaoxiang list

# è¾“å‡º
# ğŸ“¦ é¡¹ç›®ä¾èµ–
#
# è¿è¡Œæ—¶ä¾èµ–:
#   http        1.0.0    registry
#   json        2.0.0    registry
#
# å¼€å‘ä¾èµ–:
#   test-utils  0.5.0    registry
```

---

## é…ç½®æ–‡ä»¶

### yaoxiang.toml

é¡¹ç›®æ¸…å•æ–‡ä»¶ï¼Œå£°æ˜é¡¹ç›®å…ƒæ•°æ®å’Œä¾èµ–ã€‚

```toml
[package]
name = "my-project"
version = "0.1.0"
description = "é¡¹ç›®æè¿°"
authors = ["ä½œè€… <email@example.com>"]
license = "MIT"

[dependencies]
http = "1.0.0"
json = "*"

[dev-dependencies]
test-utils = "0.5.0"
```

### yaoxiang.lock

ä¾èµ–é”å®šæ–‡ä»¶ï¼Œç”±åŒ…ç®¡ç†å™¨è‡ªåŠ¨ç”Ÿæˆã€‚

```toml
# ç”± YaoXiang åŒ…ç®¡ç†å™¨è‡ªåŠ¨ç”Ÿæˆ

[package]
version = 1

[package.http]
version = "1.0.0"
source = "registry"
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### è¿è¡Œæ—¶ä¾èµ– vs å¼€å‘ä¾èµ–

- **è¿è¡Œæ—¶ä¾èµ–** (`[dependencies]`)ï¼šé¡¹ç›®è¿è¡Œæ—¶å¿…é¡»æœ‰çš„åŒ…
- **å¼€å‘ä¾èµ–** (`[dev-dependencies]`)ï¼šä»…å¼€å‘ã€æµ‹è¯•æ—¶éœ€è¦çš„åŒ…

### ä¾èµ–æ¥æº

| ç±»å‹ | é…ç½®ç¤ºä¾‹ | è¯´æ˜ |
|------|----------|------|
| Registry | `http = "1.0.0"` | ä»è¿œç¨‹åŒ…ä»“åº“è·å– |
| Git | `{ version = "1.0.0", git = "https://..." }` | ä» Git ä»“åº“è·å– |
| Path | `{ version = "0.1.0", path = "./lib" }` | ä»æœ¬åœ°è·¯å¾„è·å– |

### é”æ–‡ä»¶

`yaoxiang.lock` ç”±åŒ…ç®¡ç†å™¨è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·**åŠ¡å¿…æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**ï¼š

- ç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬
- ç¡®ä¿ CI æ„å»ºå¯é‡ç°
- é¿å…"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è¿è¡Œ"çš„é—®é¢˜

### vendor ç›®å½•

ä¾èµ–ä¸‹è½½åå­˜å‚¨åœ¨ `vendor` ç›®å½•ï¼š

- ç”± `yaoxiang install` å’Œ `yaoxiang update` è‡ªåŠ¨ç®¡ç†
- å¯ä»¥åˆ é™¤åé‡æ–°è¿è¡Œ `install` é‡å»º
- å»ºè®®åŠ å…¥ `.gitignore`ï¼Œä¸åŒå›¢é˜Ÿæˆå‘˜ç‹¬ç«‹ç®¡ç†

---

## å¸¸è§é—®é¢˜

### Q: ä¾èµ–ç‰ˆæœ¬å†²çªæ€ä¹ˆåŠï¼Ÿ

YPM ä¼šæ£€æµ‹ä¾èµ–ç‰ˆæœ¬å†²çªå¹¶æŠ¥é”™ã€‚è§£å†³æ–¹æ¡ˆï¼š

1. è°ƒæ•´ä¾èµ–ç‰ˆæœ¬è¦æ±‚
2. ç­‰å¾…ä¾èµ–ä½œè€…ä¿®å¤
3. è€ƒè™‘ç§»é™¤å†²çªçš„ä¾èµ–

### Q: å¦‚ä½•ä½¿ç”¨ç§æœ‰åŒ…ï¼Ÿ

å¯¹äºç§æœ‰åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ Git æ¥æºï¼š

```bash
# é€šè¿‡ Git URL æ·»åŠ 
# æ‰‹åŠ¨ç¼–è¾‘ yaoxiang.toml
[dependencies]
private-pkg = { version = "1.0.0", git = "https://github.com/org/private-pkg" }
```

### Q: vendor ç›®å½•å¯ä»¥åˆ é™¤å—ï¼Ÿ

å¯ä»¥ã€‚åˆ é™¤åè¿è¡Œ `yaoxiang install` ä¼šé‡æ–°ä¸‹è½½æ‰€æœ‰ä¾èµ–ã€‚

### Q: å¦‚ä½•æŸ¥çœ‹æŸä¸ªåŒ…çš„ä¿¡æ¯ï¼Ÿ

ä½¿ç”¨ `yaoxiang list` æŸ¥çœ‹æ‰€æœ‰ä¾èµ–ï¼Œæˆ–æŸ¥çœ‹ `yaoxiang.toml`ã€‚
