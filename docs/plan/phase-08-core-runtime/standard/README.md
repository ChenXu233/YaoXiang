# Standard Runtime（标准运行时）

> **路径**: `src/runtime/core/standard/`
> **Phase**: P8 - P11
> **状态**: ⚠️ 部分实现

## 概述

Standard Runtime 是标准运行时环境，包含 DAG 任务依赖管理、调度器和 VM。

## 特性

- **DAG 任务依赖**：自动分析任务间依赖关系
- **并发调度优化**：智能任务调度
- **完整 VM 支持**：字节码解释执行

## 文件结构

```
standard/
├── dag.rs            # 任务依赖图管理
├── scheduler.rs      # 调度器（P10-P11）
├── vm.rs             # 虚拟机（P12）
└── README.md         # 本文档
```

## 架构

```
┌─────────────────────────────────────┐
│         Standard Runtime            │
├─────────────────────────────────────┤
│  DAG Builder                        │
│  ├── 任务依赖分析                   │
│  ├── 拓扑排序                       │
│  └── 并发优化                       │
├─────────────────────────────────────┤
│  Scheduler                          │
│  ├── 任务队列管理                   │
│  ├── Fiber 调度                     │
│  └── 负载均衡                       │
├─────────────────────────────────────┤
│  VM                                 │
│  ├── 字节码解释                     │
│  └── 内置函数执行                   │
└─────────────────────────────────────┘
```

## 组件

### DAG（任务依赖图）

| Task | 名称 | 状态 |
|------|------|------|
| task-09-01 | DAG 节点定义 | ⚠️ 部分实现 |
| task-09-02 | 拓扑排序 | ⏳ 待实现 |
| task-09-03 | 依赖分析 | ⏳ 待实现 |

### Scheduler（调度器）

| Task | 名称 | 状态 |
|------|------|------|
| task-10-01 | 任务队列 | ⚠️ 部分实现 |
| task-10-02 | Fiber 调度 | ⏳ 待实现 |
| task-10-03 | 负载均衡 | ⏳ 待实现 |

### VM（虚拟机）

| Task | 名称 | 状态 |
|------|------|------|
| task-11-01 | 字节码解释器 | ⚠️ 部分实现 |
| task-11-02 | 内置函数 | ⚠️ 部分实现 |
| task-12-02 | 指令优化 | ⏳ 待实现 |

## 依赖

- `runtime/core/value.rs` (P8)
- `runtime/core/allocator.rs` (P8)
- `runtime/core/gc.rs` (P8)

## 与 Full 对比

Standard Runtime 缺少以下 Full Runtime 特性：
- Work Stealing 负载均衡
- @block 同步执行保证

## 使用场景

1. **标准应用**：大多数应用场景
2. **Web 服务**：高并发请求处理
3. **数据处理**：批处理任务
